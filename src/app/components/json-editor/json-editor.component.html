<div class="editor-container">
  <mat-card class="editor-card">
    <mat-card-header>
      <mat-icon color="primary">code</mat-icon>
      <mat-card-title>JSON Editor</mat-card-title>
      <mat-card-subtitle>Beautify, minify, and validate your JSON data</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="p-2">
      <div class="editor-layout">
        <!-- Toolbar Component -->
        <app-json-toolbar 
          [isValidJson]="isValidJson"
          (beautify)="beautifyJson()"
          (minify)="minifyJson()"
          (lint)="lintJson()"
          (clear)="clearEditor()"
          (import)="importFile($event)"
          (copy)="copyToClipboard()"
          (download)="downloadOutput()">
        </app-json-toolbar>

        <div class="editor-columns">
          <!-- Input Section -->
          <div class="editor-section" [class.maximized]="isInputMaximized">
            <h3>
              <mat-icon>input</mat-icon>
              <span>Input JSON</span>
              <div class="spacer"></div>
              <button mat-icon-button (click)="toggleInputMaximize()" [matTooltip]="isInputMaximized ? 'Minimize' : 'Maximize'" class="maximize-btn">
                <mat-icon>{{ isInputMaximized ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
              </button>
            </h3>
            <div class="editor-wrapper">
              <div #editor class="ace-editor"></div>
              <div *ngIf="!isValidJson" class="error-message">
                <mat-icon color="warn">error_outline</mat-icon>
                <span>{{ errorMessage }}</span>
              </div>
            </div>
          </div>

          <!-- Output Section -->
          <div class="editor-section" [class.maximized]="isOutputMaximized">
            <h3>
              <mat-icon>output</mat-icon>
              <span>Output</span>
              <div class="spacer"></div>
              <button mat-icon-button (click)="toggleOutputMaximize()" [matTooltip]="isOutputMaximized ? 'Minimize' : 'Maximize'" class="maximize-btn">
                <mat-icon>{{ isOutputMaximized ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
              </button>
            </h3>
            <div class="editor-wrapper">
              <!-- Text View (Ace Editor) -->
              <div #outputEditor class="ace-editor output-editor"></div>
            </div>
          </div>
        </div>

        <!-- Status Section -->
        <div class="status-section" *ngIf="isValidJson">
          <div class="status-item success">
            <mat-icon>check_circle</mat-icon>
            <span>JSON is valid</span>
          </div>
          <div class="status-item">
            <mat-icon>data_object</mat-icon>
            <span>{{ getJsonSize() }} characters</span>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
